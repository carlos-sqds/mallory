# Test: New User Signup Flow (MANUAL OTP VERSION)
# Tests the complete onboarding flow for a first-time user
# 
# MANUAL STEP REQUIRED:
# When you see "Enter verification code", check email and enter OTP manually
# 
# Prerequisites:
# - App is not logged in
# - Backend server is running on localhost:3001
#
# Expected behavior:
# 1. User clicks "Continue with Google"
# 2. OAuth completes (you'll need to sign in to Google manually first time)
# 3. Grid OTP modal appears
# 4. YOU MANUALLY ENTER OTP from email
# 5. User lands on chat screen

appId: ${APP_ID}
tags:
  - auth
  - critical
  - manual

---

# Step 1: Verify we're on login screen
- assertVisible: "Continue with Google"

# Step 2: Start sign-in flow
- tapOn: "Continue with Google"
- waitForAnimationToEnd:
    timeout: ${TIMEOUT_LONG}

# Step 3: OAuth redirect (happens externally)
# After OAuth, app should show Grid OTP modal
- assertVisible:
    text: "Enter verification code"
    timeout: ${TIMEOUT_LONG}

# Step 4: PAUSE for manual OTP entry
# Check your email (mallory@darkresearch.ai) for OTP
# Enter it manually in the app
# Then test will continue automatically

- tapOn: "Enter verification code"  # Focus on input

# Wait for you to enter OTP and tap Verify
# Test will wait up to 2 minutes for you to complete this
- waitForAnimationToEnd:
    timeout: 120000  # 2 minutes to manually enter OTP

# Step 5: Verify successful login
- assertVisible:
    text: "Chat"
    timeout: ${TIMEOUT_MEDIUM}

# SUCCESS: New user completed signup!

